@model tw.com.essentialoil.Order.Models.OrderView
@{    
    ViewBag.Title = "OrderList";
}

<h2>OrderList</h2>

<table class="table table-bordered">
    <thead>
        <tr>
            <th>
                訂單編號
            </th>
            <th>
                商品名稱
            </th>
            <th>
                商品價格
            </th>
            <th>
                商品數量
            </th>
            <th>
                訂單日期
            </th>
            <th>
                收貨人姓名
            </th>
            <th>
                收貨人電話
            </th>
            <th>
                收貨人地址
            </th>
            <th>
                發票公司抬頭
            </th>
            <th>
                統一編號
            </th>
            <th>
                訂單備註
            </th>
            <th>
                支付方式
            </th>
        </tr>

    </thead>
    @*目前有小bug，待排除*@
    <tbody>
        @foreach (var list in Model.Order)
        {
            <tr>
                <td>
                    @list.fOrderId
                </td>
                <td>
                    @foreach (var prod in Model.OrderDetail.Where(p => p.fOrderId == list.fOrderId))
                    {
                        @prod.fProductId<br />
                    }
                </td>
                <td>
                    @foreach (var prod in Model.OrderDetail.Where(p => p.fOrderId == list.fOrderId))
                    {
                        @prod.fUnitPrice<br />
                    }
                </td>
                <td>
                    @foreach (var prod in Model.OrderDetail.Where(p => p.fOrderId == list.fOrderId))
                    {
                        @prod.fOrderQuantity<br />
                    }
                </td>
                <td>
                    @list.fOrderDate
                </td>
                <td>
                    @list.fConsigneeName
                </td>
                <td>
                    @list.fConsigneeCellPhone
                </td>
                <td>
                    @list.fConsigneeAddress
                </td>
                <td>
                    @list.fOrderCompanyTitle
                </td>
                <td>
                    @list.fOrderTaxIdDNumber
                </td>
                <td>
                    @list.fOrderPostScript
                </td>
                <td>
                    @list.fPayment
                </td>
            </tr>

        }
    </tbody>
</table>
@*@section Scripts{
        <script>
            $('#btnjson').click(function () {
                $.getJSON('/tOrders/JSONList', function (datas) {
                    console.log(datas);
                    $.each(datas, function (idx, category) {
                        var elel = "<tr>"
                        var eleL1 = $('<td></td>').text(category.fOrderId);
                        var eleL2 = $('<td></td>').text(category.fProductId);
                        var eleL3 = $('<td></td>').text(category.fUnitPrice);
                        var eleL4 = $('<td></td>').text(category.fOrderQuantity);
                        var eleL5 = $('<td></td>').text(category.fOrderDate);
                        var eleL6 = $('<td></td>').text(category.fConsigneeName);
                        var eleL7 = $('<td></td>').text(category.fConsigneeCellPhone);
                        var eleL8 = $('<td></td>').text(category.fConsigneeAddress);
                        var eleL9 = $('<td></td>').text(category.fOrderCompanyTitle);
                        var eleL10 = $('<td></td>').text(category.fOrderTaxIdDNumber);
                        var eleL11 = $('<td></td>').text(category.fOrderPostScript);
                        var eleL12 = $('<td></td>').text(category.fPayment);
                        var eleL13 = "</tr>"
                        ele.append([elel, eleL1, eleL2, eleL3, eleL4, eleL5, eleL6, eleL7, eleL8, eleL9, eleL10, eleL11, eleL12, eleL13]);
                    });
                    $('tbody').html(ele);
                });
            });
        </script>
    }*@